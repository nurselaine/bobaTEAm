@*<h3>Component1</h3*@
@using ContosoCrafts.WebSite.Services
@using ContosoCrafts.WebSite.Models
@inject JsonFileOrderService OrderService



@code {
    private List<Order> cartOrders = new List<Order>();
    private decimal Tip { get; set; } = 0;

    protected override void OnInitialized()
    {
        cartOrders = OrderService.GetAllOrders().ToList();
    }

    private void IncreaseQuantity(Order order)
    {
        order.Quantity++;
        OrderService.ProcessOrder("defaultUser", order);
    }

    private void DecreaseQuantity(Order order)
    {
        if (order.Quantity > 1)
        {
            order.Quantity--;
            OrderService.ProcessOrder("defaultUser", order);
        }
    }

    private void RemoveOrder(Order order)
    {
        cartOrders.Remove(order);
        OrderService.ProcessOrder("defaultUser", order);
    }

    private void SetTip(int percentage)
    {
        Tip = Subtotal * percentage / 100;
    }

    private decimal Subtotal => cartOrders.Sum(o => (decimal)o.OrderSubtotal);
    private decimal Taxes => Subtotal * 0.1m; // Example tax calculation
    private decimal Total => Subtotal + Taxes + Tip;

    private decimal TipAmount(int percentage)
    {
        return Subtotal * percentage / 100;
    }

    private void ProcessOrder()
    {
        // Process the final order checkout logic
    }
}

